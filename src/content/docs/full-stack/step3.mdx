---
title: '4: アプリケーションの動作確認'
pubDate: 2024-03-20
description: 'フルスタックアプリケーションのテストと完成'
author: 'Nabe847'
image:
  url: 'https://docs.astro.build/assets/full-logo-light.png'
  alt: 'フルスタックアプリケーションのロゴ。'
tags: ['Next.js', 'FastAPI', 'tutorial']
---

## このステップについて

このステップでは、作成したフルスタックアプリケーションの動作を確認し、テストを行います。また、アプリケーションの完成に向けた最終的な調整も行います。

## アプリケーションの起動

### 1. バックエンドの起動

```bash
cd task-manager-backend
# 仮想環境の有効化（まだ有効化していない場合）
# Windows の場合
venv\Scripts\activate
# Mac/Linux の場合
source venv/bin/activate

# サーバーの起動
uvicorn app.main:app --reload
```

### 2. フロントエンドの起動

新しいターミナルを開いて：

```bash
cd task-manager-frontend
npm run dev
```

## 機能テスト

以下の機能を順番にテストしてください：

### 1. Todoの作成

1. ブラウザで `http://localhost:3000` を開く
2. テキストボックスに「買い物に行く」と入力
3. 「追加」ボタンをクリック
4. 新しいTodoがリストに追加されることを確認

### 2. Todoの完了状態の切り替え

1. 作成したTodoのチェックボックスをクリック
2. Todoのテキストに取り消し線が表示されることを確認
3. 再度チェックボックスをクリックして、取り消し線が消えることを確認

### 3. Todoの削除

1. Todoの「削除」ボタンをクリック
2. Todoがリストから削除されることを確認

### 4. データの永続化

1. いくつかのTodoを作成
2. ブラウザをリロード
3. 作成したTodoが保持されていることを確認

## エラーハンドリングの確認

### 1. バックエンドサーバーを停止

1. バックエンドのターミナルで `Ctrl + C` を押してサーバーを停止
2. フロントエンドでTodoの操作を試みる
3. エラーメッセージが適切に表示されることを確認

### 2. バックエンドサーバーを再起動

1. バックエンドサーバーを再起動
2. フロントエンドの操作が正常に動作することを確認

## パフォーマンスの確認

### 1. レスポンス時間

1. ブラウザの開発者ツールを開く（F12キー）
2. 「Network」タブを選択
3. Todoの操作を行い、APIリクエストのレスポンス時間を確認

### 2. エラーログの確認

1. ブラウザの開発者ツールの「Console」タブを確認
2. エラーメッセージが適切に表示されていることを確認

## 最終調整

### 1. 環境変数の設定

本番環境用の環境変数を設定します。

1. `task-manager-frontend/.env.local` を作成：

```
NEXT_PUBLIC_API_URL=http://localhost:8000
```

2. `src/lib/api.ts` を更新：

```typescript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000';
```

### 2. エラーメッセージの改善

`src/components/TodoList.js` のエラーハンドリングを改善します：

```javascript
// エラーメッセージの状態を追加
const [error, setError] = useState('');

// エラーハンドリングを改善
const fetchTodos = async () => {
  try {
    setError('');
    const data = await api.getTodos();
    setTodos(data);
  } catch (error) {
    setError('Todoの取得に失敗しました');
    console.error('Error fetching todos:', error);
  }
};

// エラーメッセージの表示を追加
return (
  <div className="max-w-2xl mx-auto p-4">
    <h1 className="text-2xl font-bold mb-4">Todoリスト</h1>
    
    {error && (
      <div className="mb-4 p-4 bg-red-100 text-red-700 rounded">
        {error}
      </div>
    )}
    
    {/* 既存のコード */}
  </div>
);
```

## アプリケーションの完成

これで、フルスタックアプリケーションの開発が完了しました。以下の機能が実装されています：

1. Todoの作成
2. Todoの一覧表示
3. Todoの完了状態の切り替え
4. Todoの削除
5. データの永続化
6. エラーハンドリング
7. レスポンシブなデザイン

## 次のステップ

このアプリケーションをさらに発展させるためのアイデア：

1. **認証機能の追加**
   - ユーザー登録・ログイン機能
   - ユーザーごとのTodo管理

2. **UI/UXの改善**
   - アニメーションの追加
   - ドラッグ&ドロップでの並び替え
   - ダークモードの実装

3. **機能の拡張**
   - カテゴリー分け
   - 期限の設定
   - 優先順位の設定

4. **テストの追加**
   - ユニットテスト
   - 統合テスト
   - E2Eテスト

5. **デプロイ**
   - フロントエンドのデプロイ（Vercel, Netlify等）
   - バックエンドのデプロイ（Heroku, AWS等）
   - データベースの移行（PostgreSQL等）

## まとめ

このチュートリアルでは、Next.jsとFastAPIを使用してフルスタックアプリケーションを開発しました。以下の技術を学びました：

1. **フロントエンド**
   - Next.jsの基本
   - Reactコンポーネントの作成
   - APIクライアントの実装
   - 状態管理

2. **バックエンド**
   - FastAPIの基本
   - RESTful APIの設計
   - データベース操作
   - CORSの設定

3. **フルスタック開発**
   - フロントエンドとバックエンドの連携
   - エラーハンドリング
   - 環境変数の管理
   - アプリケーションのテスト

これらの知識を活かして、さらに複雑なアプリケーションの開発に挑戦してみましょう。 